<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides" id="slides">

			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			function decodeJsonDataCookie() {
				// Get the cookie value
				const cookieValue = document.cookie.replace(/(?:(?:^|.*;)jsonData=([^;]*))|(?:^.*)$/, "$1");

				// Check if cookie exists
				if (!cookieValue) {
					return null;
				}

				try {
					// Decode the base64 string
					const decodedString = atob(cookieValue);

					// Parse the decoded string as JSON
					const jsonData = JSON.parse(decodedString);

					// Return the parsed JSON data
					return jsonData;
				} catch (error) {
					console.error("Error decoding jsonData cookie:", error);
					return null;
				}
			}

			let slidesList = decodeJsonDataCookie();
			// Assuming the JSON array is available in a variable named 'slidesList'
			// Assuming the JSON array is available in a variable named 'slidesList'
			let slidesDiv = document.getElementById("slides");

			for (const slideData of slidesList) {
				// Create question slide section
				let wholeSection = document.createElement("section");
				let questionSection = document.createElement("section");
				questionSection.classList.add("slide"); // Add a class for styling

				// Add question content
				questionSection.innerHTML = `
					<h2>${slideData.question}</h2>
					<p style="font-size: 0.5em; color: grey">${slideData.category} / ${slideData.type}</p>
					<ul>`;
				for (const option of slideData.options) {
					questionSection.innerHTML += `<li>${option}</li>`;
				}
				questionSection.innerHTML += `</ul>`;

				wholeSection.appendChild(questionSection);

				// Create answer slide section
				let answerSection = document.createElement("section");
				answerSection.classList.add("slide"); // Add a class for styling

				// Add answer content
				answerSection.innerHTML = `
					<h2>Antwort</h2>
					<p><b>${slideData.answer}</b></p>
					<p><i>(${slideData.explanation_answer})</i></p>
				  `;

				wholeSection.appendChild(answerSection);
				slidesDiv.appendChild(wholeSection);
			}

			// Style the slides (optional)
			let slides = document.querySelectorAll(".slide");
			slides.forEach(slide => {
				//nothing
			});

			let sectionEnd = document.createElement("section");
			sectionEnd.innerHTML =`
			<a href="/index.html" class="btn btn-primary text-white">Play again</a>
			`
			slidesDiv.appendChild(sectionEnd);

			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
